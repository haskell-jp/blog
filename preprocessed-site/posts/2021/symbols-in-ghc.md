---
title: Haskellã«ãŠã‘ã‚‹è¨˜å·ã®èª¿ã¹æ–¹
headingBackgroundImage: ../../img/background.png
headingDivClass: post-heading
author: YAMAMOTO Yuji
postedBy: <a href="http://the.igreque.info/">YAMAMOTO Yuji(@igrep)</a>
date: December 25, 2021
---

ã“ã®è¨˜äº‹ã¯[ã‚°ã‚°ã£ã¦è§£æ±ºã—ã¥ã‚‰ã‹ã£ãŸã“ã¨ Advent Calendar 2021](https://qiita.com/advent-calendar/2021/gseach)ã®25æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚[Haskell-jp Wikiã®Haskellã®æ­©ãæ–¹](https://wiki.haskell.jp/Hikers Guide to Haskell)ã¨ã„ã†ãƒšãƒ¼ã‚¸ã«ã‚‚ã»ã¼åŒã˜ã“ã¨ã‚’æ›¸ãã¾ã—ãŸãŒã€ä»Šå›ã¯ã‚ˆã„æ©Ÿä¼šãªã®ã§å®Ÿä¾‹ã‚’åŠ ãˆã¤ã¤è©³ã—ãç´¹ä»‹ã•ã›ã¦ãã ã•ã„ã€‚

# äºŒé …æ¼”ç®—å­ï¼ˆè¨˜å·é–¢æ•°ï¼‰ã®èª¿ã¹æ–¹

ã‚ˆãçŸ¥ã‚‰ã‚Œã¦ã„ã‚‹ã¨ãŠã‚Šã€Haskellã§ã¯äºŒé …æ¼”ç®—å­ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ãŒã‹ãªã‚Šè‡ªç”±ã«å®šç¾©ã§ãã‚‹ã¨ã„ã†ã€ã¨ã¦ã‚‚å¤‰ã‚ã£ãŸç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚ä»–ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã‚‚ä½¿ã†æ¨™æº–çš„ãªã‚‚ã®ï¼ˆä¾‹: `+`, `*`, `&&`ãªã©ï¼‰ã‚’åå‰ç©ºé–“ã‚’çµã£ã¦ç½®ãæ›ãˆã‚‹ã»ã‹ã€[ä¾‹ãˆã°ã‹ã®lensãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚ˆã†ã«](https://hackage.haskell.org/package/lens-5.1/docs/Control-Lens-Operators.html)ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ã®ä½œè€…ãŒã‚ãŸã‹ã‚‚æ–°ã—ã„æ§‹æ–‡ã‚’ä½œã‚Šä¸Šã’ã‚‹ã‹ã®ã”ã¨ãç‹¬è‡ªã®äºŒé …æ¼”ç®—å­ã‚’æä¾›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã‚Œã¯é¢ç™½ã„æ©Ÿèƒ½ã§ã¯ã‚ã‚‹ã‚‚ã®ã®ã€ã—ã°ã—ã°æ··ä¹±ã‚’æ‹›ãæ©Ÿèƒ½ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚å¾Œè¿°ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®šç¾©ã—ãŸæ¼”ç®—å­ã§ãªã„è¨˜å·ã¨ã®åŒºåˆ¥ãŒã¤ãã«ãã„ã§ã™ã—ã€ä¸€èˆ¬çš„ãªæ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã§æ¤œç´¢ã™ã‚‹ã“ã¨ã•ãˆã¾ã¾ãªã‚Šã¾ã›ã‚“ã€‚[Googleã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã§ã‚ˆãä½¿ã‚ã‚Œã‚‹è¨˜å·ã«ã‚ˆã‚‹æ¤œç´¢ã‚’ã‚µãƒãƒ¼ãƒˆã¯ã—ã¦ã„ã‚‹](https://blog.fkoji.com/2017/03052055.html)ã‚‚ã®ã®ã€Haskellã§ã—ã‹è¦‹ãªã„ã‚ˆã†ãªè¨˜å·ã®çµ„ã¿åˆã‚ã›ã¯åˆ°åº•ç„¡ç†ã§ã—ã‚‡ã†ã€‚

ãã‚“ãªèƒŒæ™¯ã‚‚ã‚ã‚Šã€Haskellã‚’ä½¿ã†äººã¯ã—ã°ã—ã°[Hoogle](https://hoogle.haskell.org/)ãªã©ã®ã€é–¢æ•°åã§æ¤œç´¢ã§ãã‚‹æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚ã“ã¡ã‚‰ã¯äºŒé …æ¼”ç®—å­ã®åå‰ã§ã®æ¤œç´¢ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚

ä¾‹ãˆã°lensãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ãŠãªã˜ã¿ã®`^.`ã§æ¤œç´¢ã™ã‚‹ã¨[æ¬¡ã®ã‚ˆã†ãªçµæœã«ãªã‚Šã¾ã—ãŸ](https://hoogle.haskell.org/?hoogle=%5E.):

![Hoogleã«ã‚ˆã‚‹æ¤œç´¢çµæœã®ä¾‹](/img/2021/symbols-in-ghc/hoogle.png)

lensãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä»¥å¤–ã§ã‚‚ã€åŒæ§˜ã®`^.`ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã®ãŒåˆ†ã‹ã‚Šã¾ã™ã­ã€‚lensãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä¾å­˜é–¢ä¿‚ãŒã¨ã¦ã‚‚å¤§ãã„ä¸€æ–¹ã€`^.`ãªã©ã®å®šç¾©ã¯ååˆ†å˜ç´”ã§ã‚³ãƒ”ãƒšã—ã¦ã‚‚ã„ã„ãã‚‰ã„å°ã•ã„ã®ã§ã€ã“ã®ã‚ˆã†ã«ã„ãã¤ã‚‚ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

ã¾ãŸã€ç‰¹ã«ã‚ˆãä½¿ã‚ã‚Œã‚‹äºŒé …æ¼”ç®—å­ã¯FPCompleteã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã§ã‚‚ã¾ã¨ã‚ã‚‰ã‚Œã¦ã„ã¾ã™:

[Operator Glossary](https://www.fpcomplete.com/haskell/tutorial/operators/)

# ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®šç¾©ã—ãŸäºŒé …æ¼”ç®—å­ã§ã¯ãªã„ã‚‚ã®ã®èª¿ã¹æ–¹

Haskellã€ã¨ã„ã†ã‹ãã®ãƒ‡ãƒ•ã‚¡ã‚¯ãƒˆã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ãªå‡¦ç†ç³»ã§ã‚ã‚‹GHCã§ã¯ã€[è¨€èªæ‹¡å¼µ](https://haskell.jp/blog/posts/2018/about-ghc-exts-1.html)ã¨ã„ã†å½¢ã§é•·å¹´æ–°ã—ã„æ§‹æ–‡ãŒææ¡ˆã•ã‚Œã¦ã„ã¾ã™[^ghc-proposals]ã€‚ãã®ä¸­ã«ã¯ã€å½“ç„¶ã“ã‚Œã¾ã§ã«ãªã„æ–¹æ³•ã§è¨˜å·ã‚’ä½¿ã£ã¦ã„ã‚‹ã‚‚ã®ã‚‚ã‚ã‚Šã¾ã™ã€‚ãã†ã—ãŸè¨˜å·ã¯ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ãŒå®šç¾©ã—ãŸé–¢æ•°ã§ã¯ãªã„ã®ã§ã€å‰è¿°ã®Hoogleãªã©ã‚’ä½¿ã£ãŸæ–¹æ³•ãŒé€šç”¨ã—ã¾ã›ã‚“ã€‚ãã“ã§ã€å½“ãƒ–ãƒ­ã‚°ã«ã‚‚ä½•åº¦ã‚‚å¯„ç¨¿ã„ãŸã ã„ãŸ\@takenobu\_hsã•ã‚“ãŒã€è¨€èªæ‹¡å¼µã«ã‚ˆã‚‹ã‚‚ã®ã‚‚å«ã‚ãŸã€Haskellã®æ§‹æ–‡ã«ãŠã‘ã‚‹è¨˜å·ã®ä¸€è¦§ã‚’ä½œã£ã¦ãã ã•ã„ã¾ã—ãŸï¼

[takenobu-hs/haskell-symbol-search-cheatsheet](https://github.com/takenobu-hs/haskell-symbol-search-cheatsheet)

[^ghc-proposals]: ä½™è«‡: [ghc-proposals](https://github.com/ghc-proposals/ghc-proposals)ã«é€ã‚‰ã‚ŒãŸPull requestã‚’è¦‹ã‚‹ã¨ã€ä»Šã©ã®ã‚ˆã†ãªææ¡ˆãŒè­°è«–ã•ã‚Œã¦ã„ã‚‹ã‹åˆ†ã‹ã‚Šã¾ã™ã€‚

å®Ÿã¯æ—¥æœ¬èªç‰ˆã‚‚[Qiitaã«](https://qiita.com/takenobu-hs/items/b95f0a4409c59440d4a9)ã‚ã‚‹ã®ã§ã™ãŒã€ä¸Šè¨˜ã®GitHubç‰ˆã®æ–¹ãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ãã“ã§ã€ä»Šå›ã¯ãŠã¾ã‘ã¨ã—ã¦GHCã«æœ€è¿‘ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³9.2.1ä»¥é™ã«ï¼‰è¿½åŠ ã•ã‚ŒãŸã€æ–°ã—ã„ãƒ”ãƒªã‚ªãƒ‰ `.` ã®ä½¿ã„æ–¹ã‚’ç´¹ä»‹ã—ã¾ã—ã‚‡ã†ã€‚

å¾“æ¥ã€Haskellã§ãƒ”ãƒªã‚ªãƒ‰ã¨ã„ãˆã°é–¢æ•°åˆæˆã‚’è¡¨ã™äºŒé …æ¼”ç®—å­ã§ã—ãŸ:

```haskell
ghci> f x = x + 1
ghci> g x = x * 3
ghci> h = g . f
ghci> h 2
9 -- 2 ã« + 1 ã—ã¦ * 3 ã—ãŸçµæœ
```

æ•°å­¦ã«ãŠã‘ã‚‹é–¢æ•°åˆæˆã®è¨˜å·ã€Œg âˆ˜ fã€ã«ä¼¼ã›ã¦ãƒ”ãƒªã‚ªãƒ‰ã‚’æ¡ç”¨ã—ãŸã®ã§ã—ã‚‡ã†ã€‚ã—ã‹ã—ã€ä¸–ã¯ä»Šã¾ã•ã«**å¤§ã€Œãƒ”ãƒªã‚ªãƒ‰ã¨ã„ãˆã°ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰[^field]ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¼”ç®—å­ã˜ã‚ƒã‚ãŒã„ã€æ™‚ä»£**ã§ã™ã€‚ãã‚Œã§ãªãã¦ã‚‚Haskellã®ãƒ¬ã‚³ãƒ¼ãƒ‰å‹ã¯æ‰±ã„ã«ãã„ã¨è¨€ã‚ã‚Œã¦ã„ã‚‹ã®ã«ã€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã¾ã§å¤‰ãªã‚„ã‚Šæ–¹ã§ã—ãŸ[^prefer]:

```haskell
data SomeRecord =
  SomeRecord { field1 :: String, field2 :: Int }

someRecord = SomeRecord "value1" 2

ghci> field1 someRecord
"value1"

ghci> field2 someRecord
2
```

[^field]: ä»–ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã¯ã€Œãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ¼ã€ã¨å‘¼ã°ã‚Œã‚‹ã“ã¨ã‚‚å¤šã„ã§ã™ãŒã€ã“ã“ã§ã¯Haskellã®ãƒ¬ã‚³ãƒ¼ãƒ‰å‹ã«ãŠã‘ã‚‹ç”¨èªã«åˆã‚ã›ã¾ã—ãŸã€‚

[^prefer]: å€‹äººçš„ã«ã¯ã‚²ãƒƒã‚¿ãƒ¼ãŒé–¢æ•°ã«ãªã‚‹ã®ã¯ã¨ã¦ã‚‚ç›´æ„Ÿçš„ãªæ°—ãŒã—ã¦å‰²ã¨å¥½ãã§ã—ãŸãŒã€ç¢ºã‹ã«ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã‚‚ã¨ã¦ã‚‚å¤šã„ä»•æ§˜ã§ã—ãŸã€‚ã‚»ãƒƒã‚¿ãƒ¼ã¯å˜ç´”ãªé–¢æ•°ã«ãªã£ã¦ãªã„ã§ã™ã—ã­ã€‚

ãã“ã§ã€GHC 9.2ã‹ã‚‰ã¯[`OverloadedRecordDot`](https://downloads.haskell.org/ghc/9.2.1/docs/html/users_guide/exts/overloaded_record_dot.html#overloaded-record-dot)ã¨ã„ã†è¨€èªæ‹¡å¼µãŒå°å…¥ã•ã‚Œã€ã“ã‚Œã‚’æœ‰åŠ¹ã«ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ãŠãªã˜ã¿ã®è¨€èªã®ã‚ˆã†ã«ãƒ”ãƒªã‚ªãƒ‰ã§ãƒ¬ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ:

ï¼ˆä»¥ä¸‹ã¯GHCiã§ä½¿ç”¨ã—ãŸä¾‹ã§ã™ï¼‰

```haskell
ghci> :set -XOverloadedRecordDot

ghci> someRecord.field1
"value1"

ghci> someRecord.field2
2

-- âš ï¸ãƒ”ãƒªã‚ªãƒ‰ã®å‰å¾Œã«ç©ºç™½ã‚’å…¥ã‚Œã‚‹ã¨é–¢æ•°åˆæˆã¨ã—ã¦è§£é‡ˆã•ã‚Œã¦ã—ã¾ã†ï¼
ghci> someRecord . field2

<interactive>:5:1: error:
    ? Couldn't match expected type â€˜Int -> câ€™
                  with actual type â€˜SomeRecordâ€™
    ? In the first argument of â€˜(.)â€™, namely â€˜someRecordâ€™
      In the expression: someRecord . field2
      In an equation for â€˜itâ€™: it = someRecord . field2
    ? Relevant bindings include
        it :: SomeRecord -> c (bound at <interactive>:5:1)
```

`OverloadedRecordDot`ã«ã¤ã„ã¦ã®ã‚ˆã‚Šè©³ã—ã„è§£èª¬ã¯ã€[Haskell Day 2021ã«ãŠã‘ã‚‹ã€fumievalã•ã‚“ã®ç™ºè¡¨](https://youtu.be/haZl-q6mfyk?t=2581)ã‚’ã”è¦§ãã ã•ã„ã€‚

# ã¾ã¨ã‚

- ä»–ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ãŒå®šç¾©ã—ãŸã€äºŒé …æ¼”ç®—å­ï¼ˆè¨˜å·é–¢æ•°ï¼‰ã‚’èª¿ã¹ã‚‹ã¨ãã¯:
    - [Hoogle](https://hoogle.haskell.org/)
    - è£œè¶³: Stackageã®æœ€æ–°ã®LTSã‹ã‚‰æ¤œç´¢ã—ãŸã„ã¨ãã¯[Stackage](https://www.stackage.org/)ã®ãƒšãƒ¼ã‚¸ä¸Šéƒ¨ã«ã‚ã‚‹ãƒ•ã‚©ãƒ¼ãƒ ã§æ¤œç´¢ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚ã“ã¡ã‚‰ã‚‚å†…éƒ¨ã¯HoogleãŒä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚
- ãã‚Œä»¥å¤–ã®å ´åˆã¯:
    - [takenobu-hs/haskell-symbol-search-cheatsheet](https://github.com/takenobu-hs/haskell-symbol-search-cheatsheet)
- Haskellã®ãƒ¬ã‚³ãƒ¼ãƒ‰å‹ã«å«Œæ°—ãŒå·®ã—ãŸã‚‰:
    - [Haskell Day 2021ã«ãŠã‘ã‚‹ã€fumievalã•ã‚“ã®ç™ºè¡¨](https://youtu.be/haZl-q6mfyk?t=2581)ã‚’è¦³ã¦[`OverloadedRecordDot`æ‹¡å¼µ](https://downloads.haskell.org/ghc/9.2.1/docs/html/users_guide/exts/overloaded_record_dot.html#overloaded-record-dot)ã«ã¤ã„ã¦å‹‰å¼·ã—ã¾ã—ã‚‡ã†ã€‚

ğŸãã‚Œã§ã¯2022å¹´ã‚‚Happy Haskell Hacking!!ğŸ…
